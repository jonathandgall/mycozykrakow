"use strict";function bounceMarker(e){null!==e.getAnimation()?e.setAnimation(null):(e.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){e.setAnimation(null)},2e3))}function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:{lat:50.06193,lng:19.94},zoom:13});for(var e=0;e<restaurantModel.currentArray.length;e++){restaurantModel.currentArray[e].marker=new google.maps.Marker({map:map,animation:null,position:{lat:restaurantModel.currentArray[e].lat,lng:restaurantModel.currentArray[e].lng},title:restaurantModel.currentArray[e].name}),function(e){e.addListener("click",function(){bounceMarker(e);for(var r,n=0;n<restaurantModel.currentArray.length;n++)restaurantModel.currentArray[n].marker==e&&(r=restaurantModel.currentArray[n]);_showInfoWindow(r)})}(restaurantModel.currentArray[e].marker)}}function _showInfoWindow(e){$.getJSON("https://api.foursquare.com/v2/venues/"+e.f2venueid+"/photos?&client_id=1QPPXDQSLOXUV5FGAANQG31S21EGUNNXJDP3HIXVECXWVXZ3&client_secret=IA0FKPF1FZ3AS4L1QNDQEFHC15B45ZY5ZXPDMX51UJL550TL&&v=20170724",function(r){var n=r.response.photos.items[0].prefix+r.response.photos.items[0].width+"x"+r.response.photos.items[0].height+r.response.photos.items[0].suffix,o=new google.maps.InfoWindow({content:'<p class="infowindow-render">A picture from inside</p> <p> <img src='+n+' alt="Pictures" width="100px"></p>'});clearInfoWindow(),o.open(map,e.marker),infowindowsArray.push(o)})}function clearInfoWindow(){for(var e=0;e<infowindowsArray.length;e++)infowindowsArray[e].close();infowindowsArray.length=0}var restaurantModel={currentArray:[{name:"77 Sushi",lat:50.0581635,lng:19.9389086,contentString:'<div class="infowindow-render">Good Sushi</div>',f2venueid:"4bd5e3797b1876b074908b86"},{name:"Youmiko Sushi",lat:50.0504222,lng:19.943054,contentString:'<div class="infowindow-render">Good Sushi</div>',f2venueid:"56193c32498e5b08a853b2e6"},{name:"Zen Sushi",lat:50.0621398,lng:19.9417126,contentString:'<div class="infowindow-render">Good Sushi</div>',f2venueid:"4b61bd41f964a520b31f2ae3"},{name:"Urara",lat:50.0643265802915,lng:19.9408391802915,contentString:'<div class="infowindow-render">Good Sushi</div>',f2venueid:"57652bda498ecdeadd38c82e"},{name:"Edo Sushi Bar",lat:50.0521837,lng:19.9429686,contentString:'<div class="infowindow-render">Better Sushi</div>',f2venueid:"4c2773e55c5ca5938cc247fe"}]},map,infowindowsArray=[],viewModel={restaurants:ko.observableArray(restaurantModel.currentArray.slice(0,restaurantModel.currentArray.length)),query:ko.observable(""),search:function(e){viewModel.restaurants.removeAll(),clearInfoWindow();for(var r=0;r<restaurantModel.currentArray.length;r++)restaurantModel.currentArray[r].name.toLowerCase().indexOf(e.toLowerCase())>=0?(viewModel.restaurants.push(restaurantModel.currentArray[r]),restaurantModel.currentArray[r].marker.setMap(map)):restaurantModel.currentArray[r].marker.setMap(null)},showInfoWindow:function(e){bounceMarker(e.marker),_showInfoWindow(e)}};viewModel.query.subscribe(viewModel.search),ko.applyBindings(viewModel);